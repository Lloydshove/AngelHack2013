package photoapp;import java.io.IOException;import java.util.Random;import javax.servlet.ServletException;import javax.servlet.http.*;import org.eclipse.jetty.server.Request;import org.eclipse.jetty.server.handler.AbstractHandler;import org.eclipse.jetty.servlet.*;import static java.lang.Double.parseDouble;public class Server extends HttpServlet {    @Override    protected void doGet(HttpServletRequest req, HttpServletResponse resp)            throws ServletException, IOException {        resp.getWriter().print(CONTENT);    }    public static void main(String[] args) throws Exception{        org.eclipse.jetty.server.Server server = new org.eclipse.jetty.server.Server(1080);        RequestHandler context = new RequestHandler();        //context.setContextPath("/gspot/");        server.setHandler(context);      //  context.addServlet(new ServletHolder(new Server()),"/");        server.start();        server.join();       }    public static String CONTENT =            "[{" +                    "\"lat\":1.2589483280609064," +                    "\"lng\":103.86431503295901," +                    "\"imgs\": [ " +                    "\"http://farm1.staticflickr.com/2/1418878_1e92283336_m.jpg\", " +                    "\"http://farm1.staticflickr.com/2/1418878_1e92283336_m.jpg\"" +                    "]" +                    "}," +                    "{" +                    "\"lat\":1.2650483280609064," +                    "\"lng\":103.86431503295901," +                    "\"imgs\": [ " +                    "\"http://farm1.staticflickr.com/2/1418878_1e92283336_m.jpg\", " +                    "\"http://farm1.staticflickr.com/2/1418878_1e92283336_m.jpg\"" +                    "]" +                    "}]";    public static class RequestHandler extends AbstractHandler    {        @Override        public void handle(String s, Request baseRequest, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {            response.setContentType("text/html;charset=utf-8");            response.setStatus(HttpServletResponse.SC_OK);            baseRequest.setHandled(true);            Double swLat = parseDouble(request.getParameter("southWestLat"));            Double swLon = parseDouble(request.getParameter("southWestLng"));            Double neLat = parseDouble(request.getParameter("northEastLat"));            Double neLon = parseDouble(request.getParameter("northEastLng"));            response.getWriter().println(                    "[{[" +                            randomPoint(swLat, swLon, neLat, neLon) + "," +                            randomPoint(swLat, swLon, neLat, neLon) + "," +                            randomPoint(swLat, swLon, neLat, neLon) + "," +                            randomPoint(swLat, swLon, neLat, neLon) + "," +                            randomPoint(swLat, swLon, neLat, neLon) + "]" + "}]"            );        }        private String randomPoint(Double swLat, Double swLon, Double neLat, Double neLon) {            Random rand = new Random();            Double newLat = swLat + (rand.nextDouble() * (neLat-swLat));            Double newLon = swLon + (rand.nextDouble() * (neLon-swLon));            return "{" +                    "\"lat\":" + newLat + "," +                            "\"lng\":"+ newLon +"," +                            "\"imgs\": [ " +                            "\"http://www.scruffmacduff.co.uk/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/l/a/large_246.jpg\", " +                            "\"http://4.bp.blogspot.com/_6q-f-zD4xPY/SoveF5qH_jI/AAAAAAAAQ-Q/C_mRNWRU_N0/s320/DogWithCape2.jpg\"," +                            "\"http://thumbnails.illustrationsource.com/huge.102.513601.JPG\"," +                            "\"http://www.kimballstock.com/pix/DOG/19/DOG-19-MQ0005-01P.JPG\"," +                            "\"http://www.costumedogs.com/wp-content/uploads/2007/06/lucador.jpg\"" +                            "]" +                            "}";        }    }}